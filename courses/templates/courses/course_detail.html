{% extends "courses/layout.html" %}
{% load course_extras %}

{% block title %}{{ course.title }}{% endblock %}

{% block content %}
    <div class="row columns">
        {{ block.super }}
        <article>
            <h1 class="">{{ course.title }}</h1>

            <div class="callout secondary">
                {{ course.description|markdown_to_html }}
            </div>

            <dl>
                {% for step in steps %}
                    <dt>
                        <a href="{{ step.get_absolute_url }}">{{ step.title }}</a>
                    </dt>
                    <dd>{{ step.description|markdown_to_html }}</dd>
                    {% if step.question_set.all %}
                        <dt>Total Questions</dt>
                        <dd>{{ step.question_set.count }}</dd>
                    {% endif %}
                {% empty %}
                    <p>This course has no steps yet</p>
                {% endfor %}
            </dl>
        </article>
        {% if user.is_authenticated %}
            <hr>
            <a href="{% url 'courses:create_quiz' course_pk=course.id %}" class="button">New Quiz</a>
        {% endif %}
    </div>
{% endblock %}


{% comment %}
<!-- {% extends 'base.html' %}
{% load course_extras %}

{% block title %}
    {{ course.title }}-{{ block.super }}
{% endblock %}

{% block content %}
    {% if course %}
        <article>
            <h2>{{ course.title }}</h2>
            <p>{{ course.description|markdown_to_html }}</p>

            <h2>{{ course.step_set.count }} Step{{ course.step_set.count|pluralize }} in this course</h2>
            -- {% for step in course.step_set.all %}
                <h3><a href="{% url 'courses:step_detail' step.course.pk step.pk %}">{{ step.title }}</a></h3>
                {{ step.description|markdown_to_html }}
            {% empty %}
                <p>This course has no steps yet</p>
            {% endfor %} --
            {% for step in steps %}
                <h3><a href="{{ step.get_absolute_url }}">{{ step.title }}</a></h3>
                {{ step.description|markdown_to_html }}
            {% empty %}
                <p>This course has no steps yet</p>
            {% endfor %}
        </article>
    {% endif %}
{% endblock %} -->
{% endcomment %}
